"use strict";function _typeof(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}!function(e){function t(t){e(".autoprompt li").removeClass("hover").eq(t).addClass("hover")}if("undefined"==typeof e)throw new Error("Autoprompt requires jQuery!");!function(){String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var n=[],i=arguments[1],o=0;t>o;o++)if(o in this){var s=this[o];e.call(i,s,o,this)&&n.push(s)}return n})}();var n={minLength:1,itemLength:8,timeout:100,appendTo:"body"},i=function(e,t,n){this.$elem=e,this.init(t,n)};e.fn.autoprompt=function(t,n){return new i(e(this),t,n)},i.prototype={init:function(t,i){this.opts=e.extend({},n,i),this.$appendTo=e(this.opts.appendTo),this.src=t,this.css="position: absolute;z-index: 99999;top: "+(this.$elem.offset().top+this.$elem.height()+2*parseInt(this.$elem.css("paddingTop"))-this.$appendTo.offset().top)+"px;left: "+(this.$elem.offset().left-this.$appendTo.offset().left)+"px;width: "+(this.$elem.width()+parseInt(this.$elem.css("paddingLeft"))+parseInt(this.$elem.css("paddingRight"))+2)+"px;",this.index=-1,this.getData(this.src),this.create(),this.changeListener()},create:function(){this.$appendTo.css("position","relative").append('<div class="autoprompt" style="'+this.css+'display: none;"><ul></ul></div>'),this.$autoprompt=e(".autoprompt")},render:function(e){for(var t="",n=e.length>this.opts.itemLength?this.opts.itemLength:e.length,i=0;n>i;i++)e[i]="object"===_typeof(e[i])?e[i].value:e[i],t+='<li data-model="'+e[i]+'">'+e[i]+"</li>";""===t?this.clean():this.$autoprompt.css("display","block").find("ul").empty().append(""+t),this.removeEvent(),this.bindEvent(n)},clean:function(){this.$autoprompt.css("display","none")},filter:function(e){var t=[];if(!e)return void this.clean();if(t=this.data.filter(function(t){return t.value.toLowerCase().includes(e)}),0===t.length){var e=e.match(/\d+/);if(!e)return;t=this.data.filter(function(t){return t.value.includes(e)})}this.render(t)},getData:function(t){var n=this;"string"==typeof t&&t.length>0&&e.ajax({url:t,type:"get",dataType:"json",success:function(e){n.data=e}})},changeListener:function(){var t=this,n=navigator.userAgent.toLowerCase();n.includes("ie 8.0")||n.includes("ie 9.0")?t.$elem.on("keyup",function(){var n=e(this).val().toLowerCase();t.index=-1,t.filter(n)}):t.$elem.on("input",function(){var n=e(this).val().toLowerCase();t.index=-1,t.filter(n)})},bindEvent:function(n){var i=this,o=navigator.userAgent.toLowerCase();o.includes("ie 8.0")||o.includes("ie 9.0")?i.$elem.on("keydown keyup",function(o){switch(o.keyCode){case 40:"keydown"===o.type?o.preventDefault():"keyup"===o.type&&(i.index=i.index===n-1?0:i.index+1,t(i.index));break;case 38:"keydown"===o.type?o.preventDefault():"keyup"===o.type&&(i.index=0===i.index?n-1:i.index-1,t(i.index));break;case 13:if("keydown"===o.type)"none"!==i.$autoprompt.css("display")&&o.preventDefault();else if("keyup"===o.type&&"none"!==i.$autoprompt.css("display")){o.preventDefault();var s=e(".autoprompt li:eq("+i.index+")").data("model");e(this).val(s),i.$autoprompt.css("display","none")}}}):i.$elem.on("keydown",function(o){switch(o.keyCode){case 40:o.preventDefault(),i.index=i.index===n-1?0:i.index+1,t(i.index);break;case 38:o.preventDefault(),i.index=0===i.index?n-1:i.index-1,t(i.index);break;case 13:if("none"!==i.$autoprompt.css("display")&&e(".autoprompt li").hasClass("hover")){o.preventDefault();var s=e(".autoprompt li:eq("+i.index+")").data("model");e(this).val(s),i.$autoprompt.css("display","none")}}}),i.$autoprompt.on("click","li",function(){var t=e(this).data("model");i.$elem.val(t),i.$autoprompt.css("display","none")}).on("hover","li",function(){e(".autoprompt li").removeClass("hover"),e(this).addClass("hover"),i.index=e(this).index()})},removeEvent:function(){this.$elem.off("keyup"),this.$elem.off("keydown")}}}(jQuery);